HgSSAO.fx ver0.0.3

独自のSSAO(Screen Space Ambient Occlusion)エフェクトです。
このエフェクトではSSAO処理で光線の遮蔽判定を行い際に、スクリーン座標から
実空間の座標に戻してから判定処理をしています。その結果、既出のSSAOエフェクトと比べて
  ①カメラワークによるAOの掛かり具合の変化が少ない(遮蔽判定方法はScreenSpaceなので完璧ではありませんが)
  ②深度に関係なくAOが掛かる範囲が実スケールのままになる(実際は遠方にほとんどAOが掛かりません)
といった特徴があります。


・動作環境
SM3.0対応グラフィックボードが必須になります。
MMEv0.37, MMEv0.37x64，MMMv125a，MMM64v125aで動作確認を行っています。旧バージョンでは動作しない可能性があります。


・使用方法
(1)HgSSAO.xをMMDにロードしてください。
(2)HgSSAO.fxの先頭パラメータを適宜変更してください。
(3)MMDのアクセサリパラメータで以下の変更が可能です。
    X : SSAO処理の光線を飛ばす長さ(-10～+10程度で調整)
    Y : SSAO処理の光線が遮蔽されているかを判定する際の光線位置とマップの深度差(-15～+15程度で調整)
    Z : AOのブラー強度(-3～+3程度で調整)
    Si：AOによる陰の濃度
    Tr：小さくすると陰の合成方法が 自己乗算→乗算 に変化します。


・AOキャンセルについて
｢MMEffect｣→｢エフェクト割当｣のHgSSAO_DepRT,HgSSAO_NmlRTタブよりモデルを選択してHgSSAO_Cancel.fxsubを適用すると、
意図的に指定したモデルだけAOを解除することが出来ます。
(Lat式モデルを使用する場合は,この方法でフェイス部のAO解除を行ってください)


・MikuMikuMovingについて
このエフェクトはMikuMikuMovingにも対応しています。
HgSSAO.fxを直接MikuMikuMovingにロードしてご利用下さい。
MMMではHgSSAO.fxのエフェクトプロパティに追加したUIコントロールよりパラメータ変更が可能です。
(エフェクトプロパティの｢拡大｣,｢アルファ｣はMMEのSi,Trと同じ扱いです)


・更新履歴
v0.0.3  2015/10/31 MMDのフルスクリーン表示で正常に描画されなくなる不具合の修正
                   他のポストエフェクト併用時に正常に描画されなくなる不具合の修正
v0.0.2  2014/7/27  内部プログラムの細かい改良、パラメータの再調整
                   特定のオブジェクトのAOを解除出来るエフェクト追加
                   MMM動的パースで正常に描画されない不具合修正
v0.0.1  2014/4/7   初回版公開


・免責事項
ご利用・改変・二次配布は自由にやっていただいてかまいません。連絡も不要です。
ただしこれらの行為は全て自己責任でやってください。
このプログラム使用により、いかなる損害が生じた場合でも当方は一切の責任を負いません。


by 針金P
Twitter : @HariganeP


